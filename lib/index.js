"use strict";

var _extends = function (child, parent) {
  child.prototype = Object.create(parent.prototype, {
    constructor: {
      value: child,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  child.__proto__ = parent;
};

var AST = require("laserbat-ast");




function recurse(branch) {
  return function (reducer, node) {
    var branchNode = node[branch];
    return REDUCERS[branchNode.type](reducer, branchNode);
  };
}

function recurseMaybe(branch) {
  return function (reducer, node) {
    var branchNode = node[branch];
    if (branchNode == null) return null;
    return REDUCERS[branchNode.type](reducer, branchNode);
  };
}

function recurseList(branch) {
  return function (reducer, node) {
    return [].map.call(node[branch], function (n) {
      return REDUCERS[n.type](reducer, n);
    });
  };
}

function recurseListMaybe(branch) {
  return function (reducer, node) {
    return [].map.call(node[branch], function (n) {
      if (n == null) return null;
      return REDUCERS[n.type](reducer, n);
    });
  };
}

var REDUCER_SPEC = {
  ArrayExpression: [recurseListMaybe("elements")],
  AssignmentExpression: [recurse("binding"), recurse("expression")],
  BinaryExpression: [recurse("left"), recurse("right")],
  Block: [recurseList("statements")],
  BlockStatement: [recurse("block")],
  BreakStatement: [recurseMaybe("label")],
  CallExpression: [recurse("callee"), recurseList("arguments")],
  CatchClause: [recurse("binding"), recurse("body")],
  ComputedMemberExpression: [recurse("object"), recurse("expression")],
  ConditionalExpression: [recurse("test"), recurse("consequent"), recurse("alternate")],
  ContinueStatement: [recurseMaybe("label")],
  DataProperty: [recurse("name"), recurse("expression")],
  DebuggerStatement: [],
  DoWhileStatement: [recurse("body"), recurse("test")],
  EmptyStatement: [],
  ExpressionStatement: [recurse("expression")],
  ForInStatement: [recurse("left"), recurse("right"), recurse("body")],
  ForStatement: [recurseMaybe("init"), recurseMaybe("test"), recurseMaybe("update"), recurse("body")],
  FunctionBody: [recurseList("directives"), recurseList("statements")],
  FunctionDeclaration: [recurse("name"), recurseList("parameters"), recurse("body")],
  FunctionExpression: [recurseMaybe("name"), recurseList("parameters"), recurse("body")],
  Getter: [recurse("name"), recurse("body")],
  Identifier: [],
  IdentifierExpression: [recurse("identifier")],
  IfStatement: [recurse("test"), recurse("consequent"), recurseMaybe("alternate")],
  LabeledStatement: [recurse("label"), recurse("body")],
  LiteralBooleanExpression: [],
  LiteralNullExpression: [],
  LiteralNumericExpression: [],
  LiteralRegExpExpression: [],
  LiteralStringExpression: [],
  NewExpression: [recurse("callee"), recurseList("arguments")],
  ObjectExpression: [recurseList("properties")],
  PostfixExpression: [recurse("operand")],
  PrefixExpression: [recurse("operand")],
  PropertyName: [],
  ReturnStatement: [recurseMaybe("expression")],
  Script: [recurse("body")],
  Setter: [recurse("name"), recurse("parameter"), recurse("body")],
  StaticMemberExpression: [recurse("object"), recurse("property")],
  SwitchCase: [recurse("test"), recurseList("consequent")],
  SwitchDefault: [recurseList("consequent")],
  SwitchStatement: [recurse("discriminant"), recurseList("cases")],
  SwitchStatementWithDefault: [recurse("discriminant"), recurseList("preDefaultCases"), recurse("defaultCase"), recurseList("postDefaultCases")],
  ThisExpression: [],
  ThrowStatement: [recurse("expression")],
  TryCatchStatement: [recurse("body"), recurse("catchClause")],
  TryFinallyStatement: [recurse("body"), recurseMaybe("catchClause"), recurse("finalizer")],
  UnknownDirective: [],
  UseStrictDirective: [],
  VariableDeclaration: [recurseList("declarators")],
  VariableDeclarationStatement: [recurse("declaration")],
  VariableDeclarator: [recurse("binding"), recurseMaybe("init")],
  WhileStatement: [recurse("test"), recurse("body")],
  WithStatement: [recurse("object"), recurse("body")] };

var REDUCERS = (function () {
  var o = Object.create(null);
  _loop: for (var T in REDUCER_SPEC) {
    var _ret = (function (T) {
      if (!{}.hasOwnProperty.call(REDUCER_SPEC, T)) return "continue";
      var reducingFunctionName = "reduce" + T;
      o[AST[T].prototype.type] = function (reducer, node) {
        return reducer[reducingFunctionName].apply(reducer, [node].concat(REDUCER_SPEC[T].map(function (f) {
          return f(reducer, node);
        })));
      };
    })(T);

    if (_ret === "continue") continue _loop;
  }
  return o;
}());


function reduce(reducible, node) {
  return REDUCERS[node.type](reducible, node);
}


exports["default"] = reduce;
var Reducible = function Reducible() {};

exports.Reducible = Reducible;
var MonoidalReducible = (function (Reducible) {
  var MonoidalReducible = function MonoidalReducible(monoid) {
    var empty = monoid.empty();
    this.identity = function () {
      return empty;
    };
    var concat = monoid.prototype && monoid.prototype.concat || monoid.concat;
    this.append = this.append2 = function (a, b) {
      return concat.call(a, b);
    };
  };

  _extends(MonoidalReducible, Reducible);

  MonoidalReducible.prototype.fromNull = function (a) {
    return a == null ? this.identity() : a;
  };

  MonoidalReducible.prototype.append3 = function (a, b, c) {
    return this.append(this.append(a, b), c);
  };

  MonoidalReducible.prototype.append4 = function (a, b, c, d) {
    return this.append(this.append3(a, b, c), d);
  };

  MonoidalReducible.prototype.fold = function (as, a) {
    var _this = this;
    return as.reduce(function (memo, x) {
      return _this.append(memo, x);
    }, a == null ? this.identity() : a);
  };

  MonoidalReducible.prototype.reduceArrayExpression = function (node, elements) {
    return this.fold(elements.filter(function (x) {
      return x != null;
    }));
  };

  MonoidalReducible.prototype.reduceAssignmentExpression = function (node, binding, expression) {
    return this.append(binding, expression);
  };

  MonoidalReducible.prototype.reduceBinaryExpression = function (node, left, right) {
    return this.append(left, right);
  };

  MonoidalReducible.prototype.reduceBlock = function (node, statements) {
    return this.fold(statements);
  };

  MonoidalReducible.prototype.reduceBlockStatement = function (node, block) {
    return block;
  };

  MonoidalReducible.prototype.reduceBreakStatement = function (node, label) {
    return this.fromNull(label);
  };

  MonoidalReducible.prototype.reduceCallExpression = function (node, callee, args) {
    return this.fold(args, callee);
  };

  MonoidalReducible.prototype.reduceCatchClause = function (node, binding, body) {
    return this.append(binding, body);
  };

  MonoidalReducible.prototype.reduceComputedMemberExpression = function (node, object, expression) {
    return this.append(object, expression);
  };

  MonoidalReducible.prototype.reduceConditionalExpression = function (node, test, consequent, alternate) {
    return this.append3(test, consequent, alternate);
  };

  MonoidalReducible.prototype.reduceContinueStatement = function (node, label) {
    return this.fromNull(label);
  };

  MonoidalReducible.prototype.reduceDataProperty = function (node, name, expression) {
    return this.append(name, expression);
  };

  MonoidalReducible.prototype.reduceDebuggerStatement = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceDoWhileStatement = function (node, body, test) {
    return this.append(body, test);
  };

  MonoidalReducible.prototype.reduceEmptyStatement = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceExpressionStatement = function (node, expression) {
    return expression;
  };

  MonoidalReducible.prototype.reduceForInStatement = function (node, left, right, body) {
    return this.append3(left, right, body);
  };

  MonoidalReducible.prototype.reduceForStatement = function (node, init, test, update, body) {
    return this.append4(this.fromNull(init), this.fromNull(test), this.fromNull(update), body);
  };

  MonoidalReducible.prototype.reduceFunctionBody = function (node, directives, statements) {
    return this.append(this.fold(directives), this.fold(statements));
  };

  MonoidalReducible.prototype.reduceFunctionDeclaration = function (node, name, parameters, body) {
    return this.append3(name, parameters, body);
  };

  MonoidalReducible.prototype.reduceFunctionExpression = function (node) {
    return this.append3(this.fromNull(name), parameters, body);
  };

  MonoidalReducible.prototype.reduceGetter = function (node, name, body) {
    return this.append(name, body);
  };

  MonoidalReducible.prototype.reduceIdentifier = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceIdentifierExpression = function (node, name) {
    return name;
  };

  MonoidalReducible.prototype.reduceIfStatement = function (node, test, consequent, alternate) {
    return this.append3(test, consequent, this.fromNull(alternate));
  };

  MonoidalReducible.prototype.reduceLabeledStatement = function (node, label, body) {
    return this.append(label, body);
  };

  MonoidalReducible.prototype.reduceLiteralBooleanExpression = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceLiteralNullExpression = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceLiteralNumericExpression = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceLiteralRegExpExpression = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceLiteralStringExpression = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceNewExpression = function (node, callee, args) {
    return this.fold(args, callee);
  };

  MonoidalReducible.prototype.reduceObjectExpression = function (node, properties) {
    return this.fold(properties);
  };

  MonoidalReducible.prototype.reducePostfixExpression = function (node, operand) {
    return operand;
  };

  MonoidalReducible.prototype.reducePrefixExpression = function (node, operand) {
    return operand;
  };

  MonoidalReducible.prototype.reducePropertyName = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceReturnStatement = function (node, expression) {
    return this.fromNull(expression);
  };

  MonoidalReducible.prototype.reduceScript = function (node, body) {
    return body;
  };

  MonoidalReducible.prototype.reduceSetter = function (node, name, parameter, body) {
    return this.append3(name, parameter, body);
  };

  MonoidalReducible.prototype.reduceStaticMemberExpression = function (node, object, property) {
    return this.append(object, property);
  };

  MonoidalReducible.prototype.reduceSwitchCase = function (node, test, consequent) {
    return this.fold(consequent, test);
  };

  MonoidalReducible.prototype.reduceSwitchDefault = function (node, consequent) {
    return this.fold(consequent);
  };

  MonoidalReducible.prototype.reduceSwitchStatement = function (node, discriminant, cases) {
    return this.fold(cases, discriminant);
  };

  MonoidalReducible.prototype.reduceSwitchStatementWithDefault = function (node, discriminant, preDefaultCases, defaultCase, postDefaultCases) {
    return this.append4(discriminant, this.fold(preDefaultCases), defaultCase, this.fold(postDefaultCases));
  };

  MonoidalReducible.prototype.reduceThisExpression = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceThrowStatement = function (node, expression) {
    return this.fromNull(expression);
  };

  MonoidalReducible.prototype.reduceTryCatchStatement = function (node, block, catchClause) {
    return this.append(block, catchClause);
  };

  MonoidalReducible.prototype.reduceTryFinallyStatement = function (node, block, catchClause, finalizer) {
    return this.append3(block, this.fromNull(catchClause), finalizer);
  };

  MonoidalReducible.prototype.reduceUnknownDirective = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceUseStrictDirective = function (node) {
    return this.identity();
  };

  MonoidalReducible.prototype.reduceVariableDeclaration = function (node, declarators) {
    return this.fold(declarators);
  };

  MonoidalReducible.prototype.reduceVariableDeclarationStatement = function (node, declaration) {
    return declaration;
  };

  MonoidalReducible.prototype.reduceVariableDeclarator = function (node, binding, init) {
    return this.append(binding, this.fromNull(init));
  };

  MonoidalReducible.prototype.reduceWhileStatement = function (node, test, body) {
    return this.append(test, body);
  };

  MonoidalReducible.prototype.reduceWithStatement = function (node, object, body) {
    return this.append(object, body);
  };

  return MonoidalReducible;
})(Reducible);

exports.MonoidalReducible = MonoidalReducible;
//# sourceMappingURL=data:application/json;base64,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QixzQkFBc0IsR0FBQSxVQUFDLElBQUksRUFBRTtBQUMzQixXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUF2S1UsbUJBQWlCLFdBd0s1Qix3QkFBd0IsR0FBQSxVQUFDLElBQUksRUFBRTtBQUM3QixXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUExS1UsbUJBQWlCLFdBMks1Qix5QkFBeUIsR0FBQSxVQUFDLElBQUksRUFBRSxXQUFXLEVBQUU7QUFDM0MsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0dBQy9COztBQTdLVSxtQkFBaUIsV0E4SzVCLGtDQUFrQyxHQUFBLFVBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRTtBQUNwRCxXQUFPLFdBQVcsQ0FBQztHQUNwQjs7QUFoTFUsbUJBQWlCLFdBaUw1Qix3QkFBd0IsR0FBQSxVQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFO0FBQzVDLFdBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0dBQ2xEOztBQW5MVSxtQkFBaUIsV0FvTDVCLG9CQUFvQixHQUFBLFVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDckMsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztHQUNoQzs7QUF0TFUsbUJBQWlCLFdBdUw1QixtQkFBbUIsR0FBQSxVQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQ3RDLFdBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDbEM7O1NBekxVLGlCQUFpQjtHQUFTLFNBQVM7O1FBQW5DLGlCQUFpQixHQUFqQixpQkFBaUIiLCJmaWxlIjoic3JjL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNCBTaGFwZSBTZWN1cml0eSwgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIilcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCAqIGFzIEFTVCBmcm9tIFwibGFzZXJiYXQtYXN0XCJcblxuXG5mdW5jdGlvbiByZWN1cnNlKGJyYW5jaCkge1xuICByZXR1cm4gZnVuY3Rpb24ocmVkdWNlciwgbm9kZSkge1xuICAgIGxldCBicmFuY2hOb2RlID0gbm9kZVticmFuY2hdO1xuICAgIHJldHVybiBSRURVQ0VSU1ticmFuY2hOb2RlLnR5cGVdKHJlZHVjZXIsIGJyYW5jaE5vZGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiByZWN1cnNlTWF5YmUoYnJhbmNoKSB7XG4gIHJldHVybiBmdW5jdGlvbihyZWR1Y2VyLCBub2RlKSB7XG4gICAgbGV0IGJyYW5jaE5vZGUgPSBub2RlW2JyYW5jaF07XG4gICAgaWYgKGJyYW5jaE5vZGUgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIFJFRFVDRVJTW2JyYW5jaE5vZGUudHlwZV0ocmVkdWNlciwgYnJhbmNoTm9kZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VMaXN0KGJyYW5jaCkge1xuICByZXR1cm4gZnVuY3Rpb24ocmVkdWNlciwgbm9kZSkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChub2RlW2JyYW5jaF0sIChuKSA9PiBSRURVQ0VSU1tuLnR5cGVdKHJlZHVjZXIsIG4pKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcmVjdXJzZUxpc3RNYXliZShicmFuY2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlZHVjZXIsIG5vZGUpIHtcbiAgICByZXR1cm4gW10ubWFwLmNhbGwobm9kZVticmFuY2hdLCAobikgPT4ge1xuICAgICAgaWYgKG4gPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gUkVEVUNFUlNbbi50eXBlXShyZWR1Y2VyLCBuKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuY29uc3QgUkVEVUNFUl9TUEVDID0ge1xuICBBcnJheUV4cHJlc3Npb246IFtyZWN1cnNlTGlzdE1heWJlKCdlbGVtZW50cycpXSxcbiAgQXNzaWdubWVudEV4cHJlc3Npb246IFtyZWN1cnNlKCdiaW5kaW5nJyksIHJlY3Vyc2UoJ2V4cHJlc3Npb24nKV0sXG4gIEJpbmFyeUV4cHJlc3Npb246IFtyZWN1cnNlKCdsZWZ0JyksIHJlY3Vyc2UoJ3JpZ2h0JyldLFxuICBCbG9jazogW3JlY3Vyc2VMaXN0KCdzdGF0ZW1lbnRzJyldLFxuICBCbG9ja1N0YXRlbWVudDogW3JlY3Vyc2UoJ2Jsb2NrJyldLFxuICBCcmVha1N0YXRlbWVudDogW3JlY3Vyc2VNYXliZSgnbGFiZWwnKV0sXG4gIENhbGxFeHByZXNzaW9uOiBbcmVjdXJzZSgnY2FsbGVlJyksIHJlY3Vyc2VMaXN0KCdhcmd1bWVudHMnKV0sXG4gIENhdGNoQ2xhdXNlOiBbcmVjdXJzZSgnYmluZGluZycpLCByZWN1cnNlKCdib2R5JyldLFxuICBDb21wdXRlZE1lbWJlckV4cHJlc3Npb246IFtyZWN1cnNlKCdvYmplY3QnKSwgcmVjdXJzZSgnZXhwcmVzc2lvbicpXSxcbiAgQ29uZGl0aW9uYWxFeHByZXNzaW9uOiBbcmVjdXJzZSgndGVzdCcpLCByZWN1cnNlKCdjb25zZXF1ZW50JyksIHJlY3Vyc2UoJ2FsdGVybmF0ZScpXSxcbiAgQ29udGludWVTdGF0ZW1lbnQ6IFtyZWN1cnNlTWF5YmUoJ2xhYmVsJyldLFxuICBEYXRhUHJvcGVydHk6IFtyZWN1cnNlKCduYW1lJyksIHJlY3Vyc2UoJ2V4cHJlc3Npb24nKV0sXG4gIERlYnVnZ2VyU3RhdGVtZW50OiBbXSxcbiAgRG9XaGlsZVN0YXRlbWVudDogW3JlY3Vyc2UoJ2JvZHknKSwgcmVjdXJzZSgndGVzdCcpXSxcbiAgRW1wdHlTdGF0ZW1lbnQ6IFtdLFxuICBFeHByZXNzaW9uU3RhdGVtZW50OiBbcmVjdXJzZSgnZXhwcmVzc2lvbicpXSxcbiAgRm9ySW5TdGF0ZW1lbnQ6IFtyZWN1cnNlKCdsZWZ0JyksIHJlY3Vyc2UoJ3JpZ2h0JyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIEZvclN0YXRlbWVudDogW3JlY3Vyc2VNYXliZSgnaW5pdCcpLCByZWN1cnNlTWF5YmUoJ3Rlc3QnKSwgcmVjdXJzZU1heWJlKCd1cGRhdGUnKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgRnVuY3Rpb25Cb2R5OiBbcmVjdXJzZUxpc3QoJ2RpcmVjdGl2ZXMnKSwgcmVjdXJzZUxpc3QoJ3N0YXRlbWVudHMnKV0sXG4gIEZ1bmN0aW9uRGVjbGFyYXRpb246IFtyZWN1cnNlKCduYW1lJyksIHJlY3Vyc2VMaXN0KCdwYXJhbWV0ZXJzJyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIEZ1bmN0aW9uRXhwcmVzc2lvbjogW3JlY3Vyc2VNYXliZSgnbmFtZScpLCByZWN1cnNlTGlzdCgncGFyYW1ldGVycycpLCByZWN1cnNlKCdib2R5JyldLFxuICBHZXR0ZXI6IFtyZWN1cnNlKCduYW1lJyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIElkZW50aWZpZXI6IFtdLFxuICBJZGVudGlmaWVyRXhwcmVzc2lvbjogW3JlY3Vyc2UoJ2lkZW50aWZpZXInKV0sXG4gIElmU3RhdGVtZW50OiBbcmVjdXJzZSgndGVzdCcpLCByZWN1cnNlKCdjb25zZXF1ZW50JyksIHJlY3Vyc2VNYXliZSgnYWx0ZXJuYXRlJyldLFxuICBMYWJlbGVkU3RhdGVtZW50OiBbcmVjdXJzZSgnbGFiZWwnKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgTGl0ZXJhbEJvb2xlYW5FeHByZXNzaW9uOiBbXSxcbiAgTGl0ZXJhbE51bGxFeHByZXNzaW9uOiBbXSxcbiAgTGl0ZXJhbE51bWVyaWNFeHByZXNzaW9uOiBbXSxcbiAgTGl0ZXJhbFJlZ0V4cEV4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsU3RyaW5nRXhwcmVzc2lvbjogW10sXG4gIE5ld0V4cHJlc3Npb246IFtyZWN1cnNlKCdjYWxsZWUnKSwgcmVjdXJzZUxpc3QoJ2FyZ3VtZW50cycpXSxcbiAgT2JqZWN0RXhwcmVzc2lvbjogW3JlY3Vyc2VMaXN0KCdwcm9wZXJ0aWVzJyldLFxuICBQb3N0Zml4RXhwcmVzc2lvbjogW3JlY3Vyc2UoJ29wZXJhbmQnKV0sXG4gIFByZWZpeEV4cHJlc3Npb246IFtyZWN1cnNlKCdvcGVyYW5kJyldLFxuICBQcm9wZXJ0eU5hbWU6IFtdLFxuICBSZXR1cm5TdGF0ZW1lbnQ6IFtyZWN1cnNlTWF5YmUoJ2V4cHJlc3Npb24nKV0sXG4gIFNjcmlwdDogW3JlY3Vyc2UoJ2JvZHknKV0sXG4gIFNldHRlcjogW3JlY3Vyc2UoJ25hbWUnKSwgcmVjdXJzZSgncGFyYW1ldGVyJyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIFN0YXRpY01lbWJlckV4cHJlc3Npb246IFtyZWN1cnNlKCdvYmplY3QnKSwgcmVjdXJzZSgncHJvcGVydHknKV0sXG4gIFN3aXRjaENhc2U6IFtyZWN1cnNlKCd0ZXN0JyksIHJlY3Vyc2VMaXN0KCdjb25zZXF1ZW50JyldLFxuICBTd2l0Y2hEZWZhdWx0OiBbcmVjdXJzZUxpc3QoJ2NvbnNlcXVlbnQnKV0sXG4gIFN3aXRjaFN0YXRlbWVudDogW3JlY3Vyc2UoJ2Rpc2NyaW1pbmFudCcpLCByZWN1cnNlTGlzdCgnY2FzZXMnKV0sXG4gIFN3aXRjaFN0YXRlbWVudFdpdGhEZWZhdWx0OiBbcmVjdXJzZSgnZGlzY3JpbWluYW50JyksIHJlY3Vyc2VMaXN0KCdwcmVEZWZhdWx0Q2FzZXMnKSwgcmVjdXJzZSgnZGVmYXVsdENhc2UnKSwgcmVjdXJzZUxpc3QoJ3Bvc3REZWZhdWx0Q2FzZXMnKV0sXG4gIFRoaXNFeHByZXNzaW9uOiBbXSxcbiAgVGhyb3dTdGF0ZW1lbnQ6IFtyZWN1cnNlKCdleHByZXNzaW9uJyldLFxuICBUcnlDYXRjaFN0YXRlbWVudDogW3JlY3Vyc2UoJ2JvZHknKSwgcmVjdXJzZSgnY2F0Y2hDbGF1c2UnKV0sXG4gIFRyeUZpbmFsbHlTdGF0ZW1lbnQ6IFtyZWN1cnNlKCdib2R5JyksIHJlY3Vyc2VNYXliZSgnY2F0Y2hDbGF1c2UnKSwgcmVjdXJzZSgnZmluYWxpemVyJyldLFxuICBVbmtub3duRGlyZWN0aXZlOiBbXSxcbiAgVXNlU3RyaWN0RGlyZWN0aXZlOiBbXSxcbiAgVmFyaWFibGVEZWNsYXJhdGlvbjogW3JlY3Vyc2VMaXN0KCdkZWNsYXJhdG9ycycpXSxcbiAgVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudDogW3JlY3Vyc2UoJ2RlY2xhcmF0aW9uJyldLFxuICBWYXJpYWJsZURlY2xhcmF0b3I6IFtyZWN1cnNlKCdiaW5kaW5nJyksIHJlY3Vyc2VNYXliZSgnaW5pdCcpXSxcbiAgV2hpbGVTdGF0ZW1lbnQ6IFtyZWN1cnNlKCd0ZXN0JyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIFdpdGhTdGF0ZW1lbnQ6IFtyZWN1cnNlKCdvYmplY3QnKSwgcmVjdXJzZSgnYm9keScpXSxcbn07XG5cbmNvbnN0IFJFRFVDRVJTID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBvID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yKGxldCBUIGluIFJFRFVDRVJfU1BFQykge1xuICAgIGlmKCF7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFJFRFVDRVJfU1BFQywgVCkpIGNvbnRpbnVlO1xuICAgIGxldCByZWR1Y2luZ0Z1bmN0aW9uTmFtZSA9ICdyZWR1Y2UnICsgVDtcbiAgICBvW0FTVFtUXS5wcm90b3R5cGUudHlwZV0gPSBmdW5jdGlvbihyZWR1Y2VyLCBub2RlKSB7XG4gICAgICByZXR1cm4gcmVkdWNlcltyZWR1Y2luZ0Z1bmN0aW9uTmFtZV0uYXBwbHkocmVkdWNlciwgW25vZGVdLmNvbmNhdChcbiAgICAgICAgUkVEVUNFUl9TUEVDW1RdLm1hcCgoZikgPT4gZihyZWR1Y2VyLCBub2RlKSlcbiAgICAgICkpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIG87XG59KCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlZHVjZShyZWR1Y2libGUsIG5vZGUpIHtcbiAgcmV0dXJuIFJFRFVDRVJTW25vZGUudHlwZV0ocmVkdWNpYmxlLCBub2RlKTtcbn1cblxuXG5leHBvcnQgY2xhc3MgUmVkdWNpYmxlIHsgfVxuXG5leHBvcnQgY2xhc3MgTW9ub2lkYWxSZWR1Y2libGUgZXh0ZW5kcyBSZWR1Y2libGUge1xuICBjb25zdHJ1Y3Rvcihtb25vaWQpIHtcbiAgICBsZXQgZW1wdHkgPSBtb25vaWQuZW1wdHkoKTtcbiAgICB0aGlzLmlkZW50aXR5ID0gKCkgPT4gZW1wdHk7XG4gICAgbGV0IGNvbmNhdCA9IG1vbm9pZC5wcm90b3R5cGUgJiYgbW9ub2lkLnByb3RvdHlwZS5jb25jYXQgfHwgbW9ub2lkLmNvbmNhdDtcbiAgICB0aGlzLmFwcGVuZCA9IHRoaXMuYXBwZW5kMiA9IChhLCBiKSA9PiBjb25jYXQuY2FsbChhLCBiKTtcbiAgfVxuXG4gIGZyb21OdWxsKGEpIHtcbiAgICByZXR1cm4gYSA9PSBudWxsID8gdGhpcy5pZGVudGl0eSgpIDogYTtcbiAgfVxuICBhcHBlbmQzKGEsIGIsIGMpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQodGhpcy5hcHBlbmQoYSwgYiksIGMpO1xuICB9XG4gIGFwcGVuZDQoYSwgYiwgYywgZCkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZCh0aGlzLmFwcGVuZDMoYSwgYiwgYyksIGQpO1xuICB9XG4gIGZvbGQoYXMsIGEpIHtcbiAgICByZXR1cm4gYXMucmVkdWNlKChtZW1vLCB4KSA9PiB0aGlzLmFwcGVuZChtZW1vLCB4KSwgYSA9PSBudWxsID8gdGhpcy5pZGVudGl0eSgpIDogYSk7XG4gIH1cblxuICByZWR1Y2VBcnJheUV4cHJlc3Npb24obm9kZSwgZWxlbWVudHMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGVsZW1lbnRzLmZpbHRlcigoeCkgPT4geCAhPSBudWxsKSk7XG4gIH1cbiAgcmVkdWNlQXNzaWdubWVudEV4cHJlc3Npb24obm9kZSwgYmluZGluZywgZXhwcmVzc2lvbikge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChiaW5kaW5nLCBleHByZXNzaW9uKTtcbiAgfVxuICByZWR1Y2VCaW5hcnlFeHByZXNzaW9uKG5vZGUsIGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKGxlZnQsIHJpZ2h0KTtcbiAgfVxuICByZWR1Y2VCbG9jayhub2RlLCBzdGF0ZW1lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9sZChzdGF0ZW1lbnRzKTtcbiAgfVxuICByZWR1Y2VCbG9ja1N0YXRlbWVudChub2RlLCBibG9jaykge1xuICAgIHJldHVybiBibG9jaztcbiAgfVxuICByZWR1Y2VCcmVha1N0YXRlbWVudChub2RlLCBsYWJlbCkge1xuICAgIHJldHVybiB0aGlzLmZyb21OdWxsKGxhYmVsKTtcbiAgfVxuICByZWR1Y2VDYWxsRXhwcmVzc2lvbihub2RlLCBjYWxsZWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGFyZ3MsIGNhbGxlZSk7XG4gIH1cbiAgcmVkdWNlQ2F0Y2hDbGF1c2Uobm9kZSwgYmluZGluZywgYm9keSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChiaW5kaW5nLCBib2R5KTtcbiAgfVxuICByZWR1Y2VDb21wdXRlZE1lbWJlckV4cHJlc3Npb24obm9kZSwgb2JqZWN0LCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKG9iamVjdCwgZXhwcmVzc2lvbik7XG4gIH1cbiAgcmVkdWNlQ29uZGl0aW9uYWxFeHByZXNzaW9uKG5vZGUsIHRlc3QsIGNvbnNlcXVlbnQsIGFsdGVybmF0ZSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZDModGVzdCwgY29uc2VxdWVudCwgYWx0ZXJuYXRlKTtcbiAgfVxuICByZWR1Y2VDb250aW51ZVN0YXRlbWVudChub2RlLCBsYWJlbCkge1xuICAgIHJldHVybiB0aGlzLmZyb21OdWxsKGxhYmVsKTtcbiAgfVxuICByZWR1Y2VEYXRhUHJvcGVydHkobm9kZSwgbmFtZSwgZXhwcmVzc2lvbikge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChuYW1lLCBleHByZXNzaW9uKTtcbiAgfVxuICByZWR1Y2VEZWJ1Z2dlclN0YXRlbWVudChub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VEb1doaWxlU3RhdGVtZW50KG5vZGUsIGJvZHksIHRlc3QpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQoYm9keSwgdGVzdCk7XG4gIH1cbiAgcmVkdWNlRW1wdHlTdGF0ZW1lbnQobm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlRXhwcmVzc2lvblN0YXRlbWVudChub2RlLCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb247XG4gIH1cbiAgcmVkdWNlRm9ySW5TdGF0ZW1lbnQobm9kZSwgbGVmdCwgcmlnaHQsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQzKGxlZnQsIHJpZ2h0LCBib2R5KTtcbiAgfVxuICByZWR1Y2VGb3JTdGF0ZW1lbnQobm9kZSwgaW5pdCwgdGVzdCwgdXBkYXRlLCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kNCh0aGlzLmZyb21OdWxsKGluaXQpLCB0aGlzLmZyb21OdWxsKHRlc3QpLCB0aGlzLmZyb21OdWxsKHVwZGF0ZSksIGJvZHkpO1xuICB9XG4gIHJlZHVjZUZ1bmN0aW9uQm9keShub2RlLCBkaXJlY3RpdmVzLCBzdGF0ZW1lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKHRoaXMuZm9sZChkaXJlY3RpdmVzKSwgdGhpcy5mb2xkKHN0YXRlbWVudHMpKTtcbiAgfVxuICByZWR1Y2VGdW5jdGlvbkRlY2xhcmF0aW9uKG5vZGUsIG5hbWUsIHBhcmFtZXRlcnMsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQzKG5hbWUsIHBhcmFtZXRlcnMsIGJvZHkpO1xuICB9XG4gIHJlZHVjZUZ1bmN0aW9uRXhwcmVzc2lvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kMyh0aGlzLmZyb21OdWxsKG5hbWUpLCBwYXJhbWV0ZXJzLCBib2R5KTtcbiAgfVxuICByZWR1Y2VHZXR0ZXIobm9kZSwgbmFtZSwgYm9keSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChuYW1lLCBib2R5KTtcbiAgfVxuICByZWR1Y2VJZGVudGlmaWVyKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eSgpO1xuICB9XG4gIHJlZHVjZUlkZW50aWZpZXJFeHByZXNzaW9uKG5vZGUsIG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZTtcbiAgfVxuICByZWR1Y2VJZlN0YXRlbWVudChub2RlLCB0ZXN0LCBjb25zZXF1ZW50LCBhbHRlcm5hdGUpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQzKHRlc3QsIGNvbnNlcXVlbnQsIHRoaXMuZnJvbU51bGwoYWx0ZXJuYXRlKSk7XG4gIH1cbiAgcmVkdWNlTGFiZWxlZFN0YXRlbWVudChub2RlLCBsYWJlbCwgYm9keSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChsYWJlbCwgYm9keSk7XG4gIH1cbiAgcmVkdWNlTGl0ZXJhbEJvb2xlYW5FeHByZXNzaW9uKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eSgpO1xuICB9XG4gIHJlZHVjZUxpdGVyYWxOdWxsRXhwcmVzc2lvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VMaXRlcmFsTnVtZXJpY0V4cHJlc3Npb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlTGl0ZXJhbFJlZ0V4cEV4cHJlc3Npb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlTGl0ZXJhbFN0cmluZ0V4cHJlc3Npb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlTmV3RXhwcmVzc2lvbihub2RlLCBjYWxsZWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGFyZ3MsIGNhbGxlZSk7XG4gIH1cbiAgcmVkdWNlT2JqZWN0RXhwcmVzc2lvbihub2RlLCBwcm9wZXJ0aWVzKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9sZChwcm9wZXJ0aWVzKTtcbiAgfVxuICByZWR1Y2VQb3N0Zml4RXhwcmVzc2lvbihub2RlLCBvcGVyYW5kKSB7XG4gICAgcmV0dXJuIG9wZXJhbmQ7XG4gIH1cbiAgcmVkdWNlUHJlZml4RXhwcmVzc2lvbihub2RlLCBvcGVyYW5kKSB7XG4gICAgcmV0dXJuIG9wZXJhbmQ7XG4gIH1cbiAgcmVkdWNlUHJvcGVydHlOYW1lKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eSgpO1xuICB9XG4gIHJlZHVjZVJldHVyblN0YXRlbWVudChub2RlLCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbU51bGwoZXhwcmVzc2lvbik7XG4gIH1cbiAgcmVkdWNlU2NyaXB0KG5vZGUsIGJvZHkpIHtcbiAgICByZXR1cm4gYm9keTtcbiAgfVxuICByZWR1Y2VTZXR0ZXIobm9kZSwgbmFtZSwgcGFyYW1ldGVyLCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kMyhuYW1lLCBwYXJhbWV0ZXIsIGJvZHkpO1xuICB9XG4gIHJlZHVjZVN0YXRpY01lbWJlckV4cHJlc3Npb24obm9kZSwgb2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChvYmplY3QsIHByb3BlcnR5KTtcbiAgfVxuICByZWR1Y2VTd2l0Y2hDYXNlKG5vZGUsIHRlc3QsIGNvbnNlcXVlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGNvbnNlcXVlbnQsIHRlc3QpO1xuICB9XG4gIHJlZHVjZVN3aXRjaERlZmF1bHQobm9kZSwgY29uc2VxdWVudCkge1xuICAgIHJldHVybiB0aGlzLmZvbGQoY29uc2VxdWVudCk7XG4gIH1cbiAgcmVkdWNlU3dpdGNoU3RhdGVtZW50KG5vZGUsIGRpc2NyaW1pbmFudCwgY2FzZXMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGNhc2VzLCBkaXNjcmltaW5hbnQpO1xuICB9XG4gIHJlZHVjZVN3aXRjaFN0YXRlbWVudFdpdGhEZWZhdWx0KG5vZGUsIGRpc2NyaW1pbmFudCwgcHJlRGVmYXVsdENhc2VzLCBkZWZhdWx0Q2FzZSwgcG9zdERlZmF1bHRDYXNlcykge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZDQoZGlzY3JpbWluYW50LCB0aGlzLmZvbGQocHJlRGVmYXVsdENhc2VzKSwgZGVmYXVsdENhc2UsIHRoaXMuZm9sZChwb3N0RGVmYXVsdENhc2VzKSk7XG4gIH1cbiAgcmVkdWNlVGhpc0V4cHJlc3Npb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlVGhyb3dTdGF0ZW1lbnQobm9kZSwgZXhwcmVzc2lvbikge1xuICAgIHJldHVybiB0aGlzLmZyb21OdWxsKGV4cHJlc3Npb24pO1xuICB9XG4gIHJlZHVjZVRyeUNhdGNoU3RhdGVtZW50KG5vZGUsIGJsb2NrLCBjYXRjaENsYXVzZSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChibG9jaywgY2F0Y2hDbGF1c2UpO1xuICB9XG4gIHJlZHVjZVRyeUZpbmFsbHlTdGF0ZW1lbnQobm9kZSwgYmxvY2ssIGNhdGNoQ2xhdXNlLCBmaW5hbGl6ZXIpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQzKGJsb2NrLCB0aGlzLmZyb21OdWxsKGNhdGNoQ2xhdXNlKSwgZmluYWxpemVyKTtcbiAgfVxuICByZWR1Y2VVbmtub3duRGlyZWN0aXZlKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eSgpO1xuICB9XG4gIHJlZHVjZVVzZVN0cmljdERpcmVjdGl2ZShub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VWYXJpYWJsZURlY2xhcmF0aW9uKG5vZGUsIGRlY2xhcmF0b3JzKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9sZChkZWNsYXJhdG9ycyk7XG4gIH1cbiAgcmVkdWNlVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudChub2RlLCBkZWNsYXJhdGlvbikge1xuICAgIHJldHVybiBkZWNsYXJhdGlvbjtcbiAgfVxuICByZWR1Y2VWYXJpYWJsZURlY2xhcmF0b3Iobm9kZSwgYmluZGluZywgaW5pdCkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChiaW5kaW5nLCB0aGlzLmZyb21OdWxsKGluaXQpKTtcbiAgfVxuICByZWR1Y2VXaGlsZVN0YXRlbWVudChub2RlLCB0ZXN0LCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKHRlc3QsIGJvZHkpO1xuICB9XG4gIHJlZHVjZVdpdGhTdGF0ZW1lbnQobm9kZSwgb2JqZWN0LCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKG9iamVjdCwgYm9keSk7XG4gIH1cbn1cbiJdfQ==