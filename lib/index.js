"use strict";

var _extends = function (child, parent) {
  child.prototype = Object.create(parent.prototype, {
    constructor: {
      value: child,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  child.__proto__ = parent;
};

var AST = require("laserbat-ast");




function recurse(branch) {
  return function (reducer, node) {
    var branchNode = node[branch];
    return DRIVER[branchNode.type](reducer, branchNode);
  };
}

function recurseMaybe(branch) {
  return function (reducer, node) {
    var branchNode = node[branch];
    if (branchNode == null) return null;
    return DRIVER[branchNode.type](reducer, branchNode);
  };
}

function recurseList(branch) {
  return function (reducer, node) {
    return [].map.call(node[branch], function (n) {
      return DRIVER[n.type](reducer, n);
    });
  };
}

function recurseListMaybe(branch) {
  return function (reducer, node) {
    return [].map.call(node[branch], function (n) {
      if (n == null) return null;
      return DRIVER[n.type](reducer, n);
    });
  };
}

var REDUCER_SPEC = {
  ArrayExpression: [recurseListMaybe("elements")],
  AssignmentExpression: [recurse("binding"), recurse("expression")],
  BinaryExpression: [recurse("left"), recurse("right")],
  Block: [recurseList("statements")],
  BlockStatement: [recurse("block")],
  BreakStatement: [recurseMaybe("label")],
  CallExpression: [recurse("callee"), recurseList("arguments")],
  CatchClause: [recurse("binding"), recurse("body")],
  ComputedMemberExpression: [recurse("object"), recurse("expression")],
  ConditionalExpression: [recurse("test"), recurse("consequent"), recurse("alternate")],
  ContinueStatement: [recurseMaybe("label")],
  DataProperty: [recurse("name"), recurse("expression")],
  DebuggerStatement: [],
  DoWhileStatement: [recurse("body"), recurse("test")],
  EmptyStatement: [],
  ExpressionStatement: [recurse("expression")],
  ForInStatement: [recurse("left"), recurse("right"), recurse("body")],
  ForStatement: [recurseMaybe("init"), recurseMaybe("test"), recurseMaybe("update"), recurse("body")],
  FunctionBody: [recurseList("directives"), recurseList("statements")],
  FunctionDeclaration: [recurse("name"), recurseList("parameters"), recurse("body")],
  FunctionExpression: [recurseMaybe("name"), recurseList("parameters"), recurse("body")],
  Getter: [recurse("name"), recurse("body")],
  Identifier: [],
  IdentifierExpression: [recurse("identifier")],
  IfStatement: [recurse("test"), recurse("consequent"), recurseMaybe("alternate")],
  LabeledStatement: [recurse("label"), recurse("body")],
  LiteralBooleanExpression: [],
  LiteralNullExpression: [],
  LiteralNumericExpression: [],
  LiteralRegExpExpression: [],
  LiteralStringExpression: [],
  NewExpression: [recurse("callee"), recurseList("arguments")],
  ObjectExpression: [recurseList("properties")],
  PostfixExpression: [recurse("operand")],
  PrefixExpression: [recurse("operand")],
  PropertyName: [],
  ReturnStatement: [recurseMaybe("expression")],
  Script: [recurse("body")],
  Setter: [recurse("name"), recurse("parameter"), recurse("body")],
  StaticMemberExpression: [recurse("object"), recurse("property")],
  SwitchCase: [recurse("test"), recurseList("consequent")],
  SwitchDefault: [recurseList("consequent")],
  SwitchStatement: [recurse("discriminant"), recurseList("cases")],
  SwitchStatementWithDefault: [recurse("discriminant"), recurseList("preDefaultCases"), recurse("defaultCase"), recurseList("postDefaultCases")],
  ThisExpression: [],
  ThrowStatement: [recurse("expression")],
  TryCatchStatement: [recurse("body"), recurse("catchClause")],
  TryFinallyStatement: [recurse("body"), recurseMaybe("catchClause"), recurse("finalizer")],
  UnknownDirective: [],
  UseStrictDirective: [],
  VariableDeclaration: [recurseList("declarators")],
  VariableDeclarationStatement: [recurse("declaration")],
  VariableDeclarator: [recurse("binding"), recurseMaybe("init")],
  WhileStatement: [recurse("test"), recurse("body")],
  WithStatement: [recurse("object"), recurse("body")] };

var DRIVER = (function () {
  var o = Object.create(null);
  _loop: for (var T in REDUCER_SPEC) {
    var _ret = (function (T) {
      if (!{}.hasOwnProperty.call(REDUCER_SPEC, T)) return "continue";
      var reducingFunctionName = "reduce" + T;
      o[AST[T].prototype.type] = function (reducer, node) {
        return reducer[reducingFunctionName].apply(reducer, [node].concat(REDUCER_SPEC[T].map(function (f) {
          return f(reducer, node);
        })));
      };
    })(T);

    if (_ret === "continue") continue _loop;
  }
  return o;
}());


function reduce(reducer, reducible) {
  return DRIVER[reducible.type](reducer, reducible);
}


exports["default"] = reduce;
var Reducer = function Reducer() {};

exports.Reducer = Reducer;
var MonoidalReducer = (function (Reducer) {
  var MonoidalReducer = function MonoidalReducer(monoid) {
    var empty = monoid.empty();
    this.identity = function () {
      return empty;
    };
    var concat = monoid.prototype && monoid.prototype.concat || monoid.concat;
    this.append = this.append2 = function (a, b) {
      return concat.call(a, b);
    };
  };

  _extends(MonoidalReducer, Reducer);

  MonoidalReducer.prototype.fromNull = function (a) {
    return a == null ? this.identity() : a;
  };

  MonoidalReducer.prototype.append3 = function (a, b, c) {
    return this.append(this.append(a, b), c);
  };

  MonoidalReducer.prototype.append4 = function (a, b, c, d) {
    return this.append(this.append3(a, b, c), d);
  };

  MonoidalReducer.prototype.fold = function (as, a) {
    var _this = this;
    return as.reduce(function (memo, x) {
      return _this.append(memo, x);
    }, a == null ? this.identity() : a);
  };

  MonoidalReducer.prototype.reduceArrayExpression = function (node, elements) {
    return this.fold(elements.filter(function (x) {
      return x != null;
    }));
  };

  MonoidalReducer.prototype.reduceAssignmentExpression = function (node, binding, expression) {
    return this.append(binding, expression);
  };

  MonoidalReducer.prototype.reduceBinaryExpression = function (node, left, right) {
    return this.append(left, right);
  };

  MonoidalReducer.prototype.reduceBlock = function (node, statements) {
    return this.fold(statements);
  };

  MonoidalReducer.prototype.reduceBlockStatement = function (node, block) {
    return block;
  };

  MonoidalReducer.prototype.reduceBreakStatement = function (node, label) {
    return this.fromNull(label);
  };

  MonoidalReducer.prototype.reduceCallExpression = function (node, callee, args) {
    return this.fold(args, callee);
  };

  MonoidalReducer.prototype.reduceCatchClause = function (node, binding, body) {
    return this.append(binding, body);
  };

  MonoidalReducer.prototype.reduceComputedMemberExpression = function (node, object, expression) {
    return this.append(object, expression);
  };

  MonoidalReducer.prototype.reduceConditionalExpression = function (node, test, consequent, alternate) {
    return this.append3(test, consequent, alternate);
  };

  MonoidalReducer.prototype.reduceContinueStatement = function (node, label) {
    return this.fromNull(label);
  };

  MonoidalReducer.prototype.reduceDataProperty = function (node, name, expression) {
    return this.append(name, expression);
  };

  MonoidalReducer.prototype.reduceDebuggerStatement = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceDoWhileStatement = function (node, body, test) {
    return this.append(body, test);
  };

  MonoidalReducer.prototype.reduceEmptyStatement = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceExpressionStatement = function (node, expression) {
    return expression;
  };

  MonoidalReducer.prototype.reduceForInStatement = function (node, left, right, body) {
    return this.append3(left, right, body);
  };

  MonoidalReducer.prototype.reduceForStatement = function (node, init, test, update, body) {
    return this.append4(this.fromNull(init), this.fromNull(test), this.fromNull(update), body);
  };

  MonoidalReducer.prototype.reduceFunctionBody = function (node, directives, statements) {
    return this.append(this.fold(directives), this.fold(statements));
  };

  MonoidalReducer.prototype.reduceFunctionDeclaration = function (node, name, parameters, body) {
    return this.append(this.fold(parameters, name), body);
  };

  MonoidalReducer.prototype.reduceFunctionExpression = function (node, name, parameters, body) {
    return this.append(this.fold(parameters, this.fromNull(name)), body);
  };

  MonoidalReducer.prototype.reduceGetter = function (node, name, body) {
    return this.append(name, body);
  };

  MonoidalReducer.prototype.reduceIdentifier = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceIdentifierExpression = function (node, name) {
    return name;
  };

  MonoidalReducer.prototype.reduceIfStatement = function (node, test, consequent, alternate) {
    return this.append3(test, consequent, this.fromNull(alternate));
  };

  MonoidalReducer.prototype.reduceLabeledStatement = function (node, label, body) {
    return this.append(label, body);
  };

  MonoidalReducer.prototype.reduceLiteralBooleanExpression = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceLiteralNullExpression = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceLiteralNumericExpression = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceLiteralRegExpExpression = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceLiteralStringExpression = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceNewExpression = function (node, callee, args) {
    return this.fold(args, callee);
  };

  MonoidalReducer.prototype.reduceObjectExpression = function (node, properties) {
    return this.fold(properties);
  };

  MonoidalReducer.prototype.reducePostfixExpression = function (node, operand) {
    return operand;
  };

  MonoidalReducer.prototype.reducePrefixExpression = function (node, operand) {
    return operand;
  };

  MonoidalReducer.prototype.reducePropertyName = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceReturnStatement = function (node, expression) {
    return this.fromNull(expression);
  };

  MonoidalReducer.prototype.reduceScript = function (node, body) {
    return body;
  };

  MonoidalReducer.prototype.reduceSetter = function (node, name, parameter, body) {
    return this.append3(name, parameter, body);
  };

  MonoidalReducer.prototype.reduceStaticMemberExpression = function (node, object, property) {
    return this.append(object, property);
  };

  MonoidalReducer.prototype.reduceSwitchCase = function (node, test, consequent) {
    return this.fold(consequent, test);
  };

  MonoidalReducer.prototype.reduceSwitchDefault = function (node, consequent) {
    return this.fold(consequent);
  };

  MonoidalReducer.prototype.reduceSwitchStatement = function (node, discriminant, cases) {
    return this.fold(cases, discriminant);
  };

  MonoidalReducer.prototype.reduceSwitchStatementWithDefault = function (node, discriminant, preDefaultCases, defaultCase, postDefaultCases) {
    return this.append4(discriminant, this.fold(preDefaultCases), defaultCase, this.fold(postDefaultCases));
  };

  MonoidalReducer.prototype.reduceThisExpression = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceThrowStatement = function (node, expression) {
    return this.fromNull(expression);
  };

  MonoidalReducer.prototype.reduceTryCatchStatement = function (node, block, catchClause) {
    return this.append(block, catchClause);
  };

  MonoidalReducer.prototype.reduceTryFinallyStatement = function (node, block, catchClause, finalizer) {
    return this.append3(block, this.fromNull(catchClause), finalizer);
  };

  MonoidalReducer.prototype.reduceUnknownDirective = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceUseStrictDirective = function (node) {
    return this.identity();
  };

  MonoidalReducer.prototype.reduceVariableDeclaration = function (node, declarators) {
    return this.fold(declarators);
  };

  MonoidalReducer.prototype.reduceVariableDeclarationStatement = function (node, declaration) {
    return declaration;
  };

  MonoidalReducer.prototype.reduceVariableDeclarator = function (node, binding, init) {
    return this.append(binding, this.fromNull(init));
  };

  MonoidalReducer.prototype.reduceWhileStatement = function (node, test, body) {
    return this.append(test, body);
  };

  MonoidalReducer.prototype.reduceWithStatement = function (node, object, body) {
    return this.append(object, body);
  };

  return MonoidalReducer;
})(Reducer);

exports.MonoidalReducer = MonoidalReducer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztJQWdCWSxHQUFHOzs7Ozs7QUFJYixtQkFBZ0IsT0FBTyxFQUFFLElBQUksRUFBRTtBQUM3QjtBQUNBOzs7OztBQUtGLG1CQUFnQixPQUFPLEVBQUUsSUFBSSxFQUFFO0FBQzdCO0FBQ0E7QUFDQTs7Ozs7QUFLRixtQkFBZ0IsT0FBTyxFQUFFLElBQUksRUFBRTtBQUM3QiwrQ0FBa0MsQ0FBQzthQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztLQUFBLENBQUMsQ0FBQztHQUNyRSxDQUFDO0NBQ0g7O0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7QUFDaEMsU0FBTyxVQUFTLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDN0IsV0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDdEMsVUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLE9BQU8sSUFBSSxDQUFDO0FBQzNCLGFBQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDbkMsQ0FBQyxDQUFDO0dBQ0osQ0FBQztDQUNIOztBQUVELElBQU0sWUFBWSxHQUFHO0FBQ25CLGlCQUFlLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMvQyxzQkFBb0IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDakUsa0JBQWdCLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JELE9BQUssRUFBRSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNsQyxnQkFBYyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2xDLGdCQUFjLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDdkMsZ0JBQWMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDN0QsYUFBVyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsRCwwQkFBd0IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEUsdUJBQXFCLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNyRixtQkFBaUIsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQyxjQUFZLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ3RELG1CQUFpQixFQUFFLEVBQUU7QUFDckIsa0JBQWdCLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3BELGdCQUFjLEVBQUUsRUFBRTtBQUNsQixxQkFBbUIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUM1QyxnQkFBYyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDcEUsY0FBWSxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ25HLGNBQVksRUFBRSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsRUFBRSxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDcEUscUJBQW1CLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsV0FBVyxDQUFDLFlBQVksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsRixvQkFBa0IsRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxXQUFXLENBQUMsWUFBWSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3RGLFFBQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUMsWUFBVSxFQUFFLEVBQUU7QUFDZCxzQkFBb0IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUM3QyxhQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoRixrQkFBZ0IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckQsMEJBQXdCLEVBQUUsRUFBRTtBQUM1Qix1QkFBcUIsRUFBRSxFQUFFO0FBQ3pCLDBCQUF3QixFQUFFLEVBQUU7QUFDNUIseUJBQXVCLEVBQUUsRUFBRTtBQUMzQix5QkFBdUIsRUFBRSxFQUFFO0FBQzNCLGVBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDNUQsa0JBQWdCLEVBQUUsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDN0MsbUJBQWlCLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDdkMsa0JBQWdCLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDdEMsY0FBWSxFQUFFLEVBQUU7QUFDaEIsaUJBQWUsRUFBRSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUM3QyxRQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDekIsUUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDaEUsd0JBQXNCLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2hFLFlBQVUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDeEQsZUFBYSxFQUFFLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzFDLGlCQUFlLEVBQUUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQUUsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2hFLDRCQUEwQixFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFBRSxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUM5SSxnQkFBYyxFQUFFLEVBQUU7QUFDbEIsZ0JBQWMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN2QyxtQkFBaUIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDNUQscUJBQW1CLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsWUFBWSxDQUFDLGFBQWEsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN6RixrQkFBZ0IsRUFBRSxFQUFFO0FBQ3BCLG9CQUFrQixFQUFFLEVBQUU7QUFDdEIscUJBQW1CLEVBQUUsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDakQsOEJBQTRCLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDdEQsb0JBQWtCLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzlELGdCQUFjLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2xELGVBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFDcEQsQ0FBQzs7QUFFRixJQUFNLE1BQU0sR0FBRyxDQUFDLFlBQVU7QUFDeEIsTUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM1QixLQUFJLElBQUksQ0FBQyxJQUFJLFlBQVksRUFBRTswQkFLUixDQUFDO0FBSmxCLFVBQUcsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLEVBQUUsa0JBQVM7QUFDdEQsVUFBSSxvQkFBb0IsR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLE9BQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLFVBQVMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNqRCxlQUFPLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQy9ELFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBQyxDQUFDO2lCQUFLLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDO1NBQUEsQ0FBQyxDQUM3QyxDQUFDLENBQUM7T0FDSixDQUFDO09BRmUsQ0FBQzs7O0dBR25CO0FBQ0QsU0FBTyxDQUFDLENBQUM7Q0FDVixFQUFFLENBQUMsQ0FBQzs7O0FBR1UsU0FBUyxNQUFNLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRTtBQUNqRCxTQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0NBQ25EOzs7cUJBRnVCLE1BQU07SUFLakIsT0FBTyxZQUFQLE9BQU87O1FBQVAsT0FBTyxHQUFQLE9BQU87SUFFUCxlQUFlLGNBQVMsT0FBTztNQUEvQixlQUFlLEdBQ2YsU0FEQSxlQUFlLENBQ2QsTUFBTSxFQUFFO0FBQ2xCLFFBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUMzQixRQUFJLENBQUMsUUFBUSxHQUFHO2FBQU0sS0FBSztLQUFBLENBQUM7QUFDNUIsUUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQzFFLFFBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFDLENBQUMsRUFBRSxDQUFDO2FBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQUEsQ0FBQztHQUMxRDs7V0FOVSxlQUFlLEVBQVMsT0FBTzs7QUFBL0IsaUJBQWUsV0FRMUIsUUFBUSxHQUFBLFVBQUMsQ0FBQyxFQUFFO0FBQ1YsV0FBTyxDQUFDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7R0FDeEM7O0FBVlUsaUJBQWUsV0FXMUIsT0FBTyxHQUFBLFVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDZixXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7R0FDMUM7O0FBYlUsaUJBQWUsV0FjMUIsT0FBTyxHQUFBLFVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ2xCLFdBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7R0FDOUM7O0FBaEJVLGlCQUFlLFdBaUIxQixJQUFJLEdBQUEsVUFBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFOztBQUNWLFdBQU8sRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFDLElBQUksRUFBRSxDQUFDO2FBQUssTUFBSyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztLQUFBLEVBQUUsQ0FBQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7R0FDdEY7O0FBbkJVLGlCQUFlLFdBcUIxQixxQkFBcUIsR0FBQSxVQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDcEMsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBQyxDQUFDO2FBQUssQ0FBQyxJQUFJLElBQUk7S0FBQSxDQUFDLENBQUMsQ0FBQztHQUNyRDs7QUF2QlUsaUJBQWUsV0F3QjFCLDBCQUEwQixHQUFBLFVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUU7QUFDcEQsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztHQUN6Qzs7QUExQlUsaUJBQWUsV0EyQjFCLHNCQUFzQixHQUFBLFVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7QUFDeEMsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztHQUNqQzs7QUE3QlUsaUJBQWUsV0E4QjFCLFdBQVcsR0FBQSxVQUFDLElBQUksRUFBRSxVQUFVLEVBQUU7QUFDNUIsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0dBQzlCOztBQWhDVSxpQkFBZSxXQWlDMUIsb0JBQW9CLEdBQUEsVUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ2hDLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7O0FBbkNVLGlCQUFlLFdBb0MxQixvQkFBb0IsR0FBQSxVQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7QUFDaEMsV0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0dBQzdCOztBQXRDVSxpQkFBZSxXQXVDMUIsb0JBQW9CLEdBQUEsVUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUN2QyxXQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0dBQ2hDOztBQXpDVSxpQkFBZSxXQTBDMUIsaUJBQWlCLEdBQUEsVUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNyQyxXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0dBQ25DOztBQTVDVSxpQkFBZSxXQTZDMUIsOEJBQThCLEdBQUEsVUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRTtBQUN2RCxXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0dBQ3hDOztBQS9DVSxpQkFBZSxXQWdEMUIsMkJBQTJCLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUU7QUFDN0QsV0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7R0FDbEQ7O0FBbERVLGlCQUFlLFdBbUQxQix1QkFBdUIsR0FBQSxVQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7QUFDbkMsV0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0dBQzdCOztBQXJEVSxpQkFBZSxXQXNEMUIsa0JBQWtCLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRTtBQUN6QyxXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0dBQ3RDOztBQXhEVSxpQkFBZSxXQXlEMUIsdUJBQXVCLEdBQUEsVUFBQyxJQUFJLEVBQUU7QUFDNUIsV0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7R0FDeEI7O0FBM0RVLGlCQUFlLFdBNEQxQixzQkFBc0IsR0FBQSxVQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ3ZDLFdBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDaEM7O0FBOURVLGlCQUFlLFdBK0QxQixvQkFBb0IsR0FBQSxVQUFDLElBQUksRUFBRTtBQUN6QixXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUFqRVUsaUJBQWUsV0FrRTFCLHlCQUF5QixHQUFBLFVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtBQUMxQyxXQUFPLFVBQVUsQ0FBQztHQUNuQjs7QUFwRVUsaUJBQWUsV0FxRTFCLG9CQUFvQixHQUFBLFVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQzVDLFdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0dBQ3hDOztBQXZFVSxpQkFBZSxXQXdFMUIsa0JBQWtCLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQ2pELFdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztHQUM1Rjs7QUExRVUsaUJBQWUsV0EyRTFCLGtCQUFrQixHQUFBLFVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDL0MsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0dBQ2xFOztBQTdFVSxpQkFBZSxXQThFMUIseUJBQXlCLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUU7QUFDdEQsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0dBQ3ZEOztBQWhGVSxpQkFBZSxXQWlGMUIsd0JBQXdCLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUU7QUFDckQsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztHQUN0RTs7QUFuRlUsaUJBQWUsV0FvRjFCLFlBQVksR0FBQSxVQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQzdCLFdBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDaEM7O0FBdEZVLGlCQUFlLFdBdUYxQixnQkFBZ0IsR0FBQSxVQUFDLElBQUksRUFBRTtBQUNyQixXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUF6RlUsaUJBQWUsV0EwRjFCLDBCQUEwQixHQUFBLFVBQUMsSUFBSSxFQUFFLElBQUksRUFBRTtBQUNyQyxXQUFPLElBQUksQ0FBQztHQUNiOztBQTVGVSxpQkFBZSxXQTZGMUIsaUJBQWlCLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUU7QUFDbkQsV0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0dBQ2pFOztBQS9GVSxpQkFBZSxXQWdHMUIsc0JBQXNCLEdBQUEsVUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtBQUN4QyxXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0dBQ2pDOztBQWxHVSxpQkFBZSxXQW1HMUIsOEJBQThCLEdBQUEsVUFBQyxJQUFJLEVBQUU7QUFDbkMsV0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7R0FDeEI7O0FBckdVLGlCQUFlLFdBc0cxQiwyQkFBMkIsR0FBQSxVQUFDLElBQUksRUFBRTtBQUNoQyxXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUF4R1UsaUJBQWUsV0F5RzFCLDhCQUE4QixHQUFBLFVBQUMsSUFBSSxFQUFFO0FBQ25DLFdBQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0dBQ3hCOztBQTNHVSxpQkFBZSxXQTRHMUIsNkJBQTZCLEdBQUEsVUFBQyxJQUFJLEVBQUU7QUFDbEMsV0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7R0FDeEI7O0FBOUdVLGlCQUFlLFdBK0cxQiw2QkFBNkIsR0FBQSxVQUFDLElBQUksRUFBRTtBQUNsQyxXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUFqSFUsaUJBQWUsV0FrSDFCLG1CQUFtQixHQUFBLFVBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDdEMsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztHQUNoQzs7QUFwSFUsaUJBQWUsV0FxSDFCLHNCQUFzQixHQUFBLFVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtBQUN2QyxXQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7R0FDOUI7O0FBdkhVLGlCQUFlLFdBd0gxQix1QkFBdUIsR0FBQSxVQUFDLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDckMsV0FBTyxPQUFPLENBQUM7R0FDaEI7O0FBMUhVLGlCQUFlLFdBMkgxQixzQkFBc0IsR0FBQSxVQUFDLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDcEMsV0FBTyxPQUFPLENBQUM7R0FDaEI7O0FBN0hVLGlCQUFlLFdBOEgxQixrQkFBa0IsR0FBQSxVQUFDLElBQUksRUFBRTtBQUN2QixXQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztHQUN4Qjs7QUFoSVUsaUJBQWUsV0FpSTFCLHFCQUFxQixHQUFBLFVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtBQUN0QyxXQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7R0FDbEM7O0FBbklVLGlCQUFlLFdBb0kxQixZQUFZLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ3ZCLFdBQU8sSUFBSSxDQUFDO0dBQ2I7O0FBdElVLGlCQUFlLFdBdUkxQixZQUFZLEdBQUEsVUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUU7QUFDeEMsV0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDNUM7O0FBeklVLGlCQUFlLFdBMEkxQiw0QkFBNEIsR0FBQSxVQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFO0FBQ25ELFdBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7R0FDdEM7O0FBNUlVLGlCQUFlLFdBNkkxQixnQkFBZ0IsR0FBQSxVQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO0FBQ3ZDLFdBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7R0FDcEM7O0FBL0lVLGlCQUFlLFdBZ0oxQixtQkFBbUIsR0FBQSxVQUFDLElBQUksRUFBRSxVQUFVLEVBQUU7QUFDcEMsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0dBQzlCOztBQWxKVSxpQkFBZSxXQW1KMUIscUJBQXFCLEdBQUEsVUFBQyxJQUFJLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRTtBQUMvQyxXQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDO0dBQ3ZDOztBQXJKVSxpQkFBZSxXQXNKMUIsZ0NBQWdDLEdBQUEsVUFBQyxJQUFJLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUU7QUFDbkcsV0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQztHQUN6Rzs7QUF4SlUsaUJBQWUsV0F5SjFCLG9CQUFvQixHQUFBLFVBQUMsSUFBSSxFQUFFO0FBQ3pCLFdBQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0dBQ3hCOztBQTNKVSxpQkFBZSxXQTRKMUIsb0JBQW9CLEdBQUEsVUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO0FBQ3JDLFdBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztHQUNsQzs7QUE5SlUsaUJBQWUsV0ErSjFCLHVCQUF1QixHQUFBLFVBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUU7QUFDaEQsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztHQUN4Qzs7QUFqS1UsaUJBQWUsV0FrSzFCLHlCQUF5QixHQUFBLFVBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFO0FBQzdELFdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztHQUNuRTs7QUFwS1UsaUJBQWUsV0FxSzFCLHNCQUFzQixHQUFBLFVBQUMsSUFBSSxFQUFFO0FBQzNCLFdBQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0dBQ3hCOztBQXZLVSxpQkFBZSxXQXdLMUIsd0JBQXdCLEdBQUEsVUFBQyxJQUFJLEVBQUU7QUFDN0IsV0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7R0FDeEI7O0FBMUtVLGlCQUFlLFdBMksxQix5QkFBeUIsR0FBQSxVQUFDLElBQUksRUFBRSxXQUFXLEVBQUU7QUFDM0MsV0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0dBQy9COztBQTdLVSxpQkFBZSxXQThLMUIsa0NBQWtDLEdBQUEsVUFBQyxJQUFJLEVBQUUsV0FBVyxFQUFFO0FBQ3BELFdBQU8sV0FBVyxDQUFDO0dBQ3BCOztBQWhMVSxpQkFBZSxXQWlMMUIsd0JBQXdCLEdBQUEsVUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUM1QyxXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztHQUNsRDs7QUFuTFUsaUJBQWUsV0FvTDFCLG9CQUFvQixHQUFBLFVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDckMsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztHQUNoQzs7QUF0TFUsaUJBQWUsV0F1TDFCLG1CQUFtQixHQUFBLFVBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDdEMsV0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztHQUNsQzs7U0F6TFUsZUFBZTtHQUFTLE9BQU87O1FBQS9CLGVBQWUsR0FBZixlQUFlIiwiZmlsZSI6InNyYy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IDIwMTQgU2hhcGUgU2VjdXJpdHksIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgKiBhcyBBU1QgZnJvbSBcImxhc2VyYmF0LWFzdFwiXG5cblxuZnVuY3Rpb24gcmVjdXJzZShicmFuY2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlZHVjZXIsIG5vZGUpIHtcbiAgICBsZXQgYnJhbmNoTm9kZSA9IG5vZGVbYnJhbmNoXTtcbiAgICByZXR1cm4gRFJJVkVSW2JyYW5jaE5vZGUudHlwZV0ocmVkdWNlciwgYnJhbmNoTm9kZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VNYXliZShicmFuY2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlZHVjZXIsIG5vZGUpIHtcbiAgICBsZXQgYnJhbmNoTm9kZSA9IG5vZGVbYnJhbmNoXTtcbiAgICBpZiAoYnJhbmNoTm9kZSA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gRFJJVkVSW2JyYW5jaE5vZGUudHlwZV0ocmVkdWNlciwgYnJhbmNoTm9kZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VMaXN0KGJyYW5jaCkge1xuICByZXR1cm4gZnVuY3Rpb24ocmVkdWNlciwgbm9kZSkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChub2RlW2JyYW5jaF0sIChuKSA9PiBEUklWRVJbbi50eXBlXShyZWR1Y2VyLCBuKSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VMaXN0TWF5YmUoYnJhbmNoKSB7XG4gIHJldHVybiBmdW5jdGlvbihyZWR1Y2VyLCBub2RlKSB7XG4gICAgcmV0dXJuIFtdLm1hcC5jYWxsKG5vZGVbYnJhbmNoXSwgKG4pID0+IHtcbiAgICAgIGlmIChuID09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIERSSVZFUltuLnR5cGVdKHJlZHVjZXIsIG4pO1xuICAgIH0pO1xuICB9O1xufVxuXG5jb25zdCBSRURVQ0VSX1NQRUMgPSB7XG4gIEFycmF5RXhwcmVzc2lvbjogW3JlY3Vyc2VMaXN0TWF5YmUoJ2VsZW1lbnRzJyldLFxuICBBc3NpZ25tZW50RXhwcmVzc2lvbjogW3JlY3Vyc2UoJ2JpbmRpbmcnKSwgcmVjdXJzZSgnZXhwcmVzc2lvbicpXSxcbiAgQmluYXJ5RXhwcmVzc2lvbjogW3JlY3Vyc2UoJ2xlZnQnKSwgcmVjdXJzZSgncmlnaHQnKV0sXG4gIEJsb2NrOiBbcmVjdXJzZUxpc3QoJ3N0YXRlbWVudHMnKV0sXG4gIEJsb2NrU3RhdGVtZW50OiBbcmVjdXJzZSgnYmxvY2snKV0sXG4gIEJyZWFrU3RhdGVtZW50OiBbcmVjdXJzZU1heWJlKCdsYWJlbCcpXSxcbiAgQ2FsbEV4cHJlc3Npb246IFtyZWN1cnNlKCdjYWxsZWUnKSwgcmVjdXJzZUxpc3QoJ2FyZ3VtZW50cycpXSxcbiAgQ2F0Y2hDbGF1c2U6IFtyZWN1cnNlKCdiaW5kaW5nJyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIENvbXB1dGVkTWVtYmVyRXhwcmVzc2lvbjogW3JlY3Vyc2UoJ29iamVjdCcpLCByZWN1cnNlKCdleHByZXNzaW9uJyldLFxuICBDb25kaXRpb25hbEV4cHJlc3Npb246IFtyZWN1cnNlKCd0ZXN0JyksIHJlY3Vyc2UoJ2NvbnNlcXVlbnQnKSwgcmVjdXJzZSgnYWx0ZXJuYXRlJyldLFxuICBDb250aW51ZVN0YXRlbWVudDogW3JlY3Vyc2VNYXliZSgnbGFiZWwnKV0sXG4gIERhdGFQcm9wZXJ0eTogW3JlY3Vyc2UoJ25hbWUnKSwgcmVjdXJzZSgnZXhwcmVzc2lvbicpXSxcbiAgRGVidWdnZXJTdGF0ZW1lbnQ6IFtdLFxuICBEb1doaWxlU3RhdGVtZW50OiBbcmVjdXJzZSgnYm9keScpLCByZWN1cnNlKCd0ZXN0JyldLFxuICBFbXB0eVN0YXRlbWVudDogW10sXG4gIEV4cHJlc3Npb25TdGF0ZW1lbnQ6IFtyZWN1cnNlKCdleHByZXNzaW9uJyldLFxuICBGb3JJblN0YXRlbWVudDogW3JlY3Vyc2UoJ2xlZnQnKSwgcmVjdXJzZSgncmlnaHQnKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgRm9yU3RhdGVtZW50OiBbcmVjdXJzZU1heWJlKCdpbml0JyksIHJlY3Vyc2VNYXliZSgndGVzdCcpLCByZWN1cnNlTWF5YmUoJ3VwZGF0ZScpLCByZWN1cnNlKCdib2R5JyldLFxuICBGdW5jdGlvbkJvZHk6IFtyZWN1cnNlTGlzdCgnZGlyZWN0aXZlcycpLCByZWN1cnNlTGlzdCgnc3RhdGVtZW50cycpXSxcbiAgRnVuY3Rpb25EZWNsYXJhdGlvbjogW3JlY3Vyc2UoJ25hbWUnKSwgcmVjdXJzZUxpc3QoJ3BhcmFtZXRlcnMnKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgRnVuY3Rpb25FeHByZXNzaW9uOiBbcmVjdXJzZU1heWJlKCduYW1lJyksIHJlY3Vyc2VMaXN0KCdwYXJhbWV0ZXJzJyksIHJlY3Vyc2UoJ2JvZHknKV0sXG4gIEdldHRlcjogW3JlY3Vyc2UoJ25hbWUnKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgSWRlbnRpZmllcjogW10sXG4gIElkZW50aWZpZXJFeHByZXNzaW9uOiBbcmVjdXJzZSgnaWRlbnRpZmllcicpXSxcbiAgSWZTdGF0ZW1lbnQ6IFtyZWN1cnNlKCd0ZXN0JyksIHJlY3Vyc2UoJ2NvbnNlcXVlbnQnKSwgcmVjdXJzZU1heWJlKCdhbHRlcm5hdGUnKV0sXG4gIExhYmVsZWRTdGF0ZW1lbnQ6IFtyZWN1cnNlKCdsYWJlbCcpLCByZWN1cnNlKCdib2R5JyldLFxuICBMaXRlcmFsQm9vbGVhbkV4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsTnVsbEV4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsTnVtZXJpY0V4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsUmVnRXhwRXhwcmVzc2lvbjogW10sXG4gIExpdGVyYWxTdHJpbmdFeHByZXNzaW9uOiBbXSxcbiAgTmV3RXhwcmVzc2lvbjogW3JlY3Vyc2UoJ2NhbGxlZScpLCByZWN1cnNlTGlzdCgnYXJndW1lbnRzJyldLFxuICBPYmplY3RFeHByZXNzaW9uOiBbcmVjdXJzZUxpc3QoJ3Byb3BlcnRpZXMnKV0sXG4gIFBvc3RmaXhFeHByZXNzaW9uOiBbcmVjdXJzZSgnb3BlcmFuZCcpXSxcbiAgUHJlZml4RXhwcmVzc2lvbjogW3JlY3Vyc2UoJ29wZXJhbmQnKV0sXG4gIFByb3BlcnR5TmFtZTogW10sXG4gIFJldHVyblN0YXRlbWVudDogW3JlY3Vyc2VNYXliZSgnZXhwcmVzc2lvbicpXSxcbiAgU2NyaXB0OiBbcmVjdXJzZSgnYm9keScpXSxcbiAgU2V0dGVyOiBbcmVjdXJzZSgnbmFtZScpLCByZWN1cnNlKCdwYXJhbWV0ZXInKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgU3RhdGljTWVtYmVyRXhwcmVzc2lvbjogW3JlY3Vyc2UoJ29iamVjdCcpLCByZWN1cnNlKCdwcm9wZXJ0eScpXSxcbiAgU3dpdGNoQ2FzZTogW3JlY3Vyc2UoJ3Rlc3QnKSwgcmVjdXJzZUxpc3QoJ2NvbnNlcXVlbnQnKV0sXG4gIFN3aXRjaERlZmF1bHQ6IFtyZWN1cnNlTGlzdCgnY29uc2VxdWVudCcpXSxcbiAgU3dpdGNoU3RhdGVtZW50OiBbcmVjdXJzZSgnZGlzY3JpbWluYW50JyksIHJlY3Vyc2VMaXN0KCdjYXNlcycpXSxcbiAgU3dpdGNoU3RhdGVtZW50V2l0aERlZmF1bHQ6IFtyZWN1cnNlKCdkaXNjcmltaW5hbnQnKSwgcmVjdXJzZUxpc3QoJ3ByZURlZmF1bHRDYXNlcycpLCByZWN1cnNlKCdkZWZhdWx0Q2FzZScpLCByZWN1cnNlTGlzdCgncG9zdERlZmF1bHRDYXNlcycpXSxcbiAgVGhpc0V4cHJlc3Npb246IFtdLFxuICBUaHJvd1N0YXRlbWVudDogW3JlY3Vyc2UoJ2V4cHJlc3Npb24nKV0sXG4gIFRyeUNhdGNoU3RhdGVtZW50OiBbcmVjdXJzZSgnYm9keScpLCByZWN1cnNlKCdjYXRjaENsYXVzZScpXSxcbiAgVHJ5RmluYWxseVN0YXRlbWVudDogW3JlY3Vyc2UoJ2JvZHknKSwgcmVjdXJzZU1heWJlKCdjYXRjaENsYXVzZScpLCByZWN1cnNlKCdmaW5hbGl6ZXInKV0sXG4gIFVua25vd25EaXJlY3RpdmU6IFtdLFxuICBVc2VTdHJpY3REaXJlY3RpdmU6IFtdLFxuICBWYXJpYWJsZURlY2xhcmF0aW9uOiBbcmVjdXJzZUxpc3QoJ2RlY2xhcmF0b3JzJyldLFxuICBWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50OiBbcmVjdXJzZSgnZGVjbGFyYXRpb24nKV0sXG4gIFZhcmlhYmxlRGVjbGFyYXRvcjogW3JlY3Vyc2UoJ2JpbmRpbmcnKSwgcmVjdXJzZU1heWJlKCdpbml0JyldLFxuICBXaGlsZVN0YXRlbWVudDogW3JlY3Vyc2UoJ3Rlc3QnKSwgcmVjdXJzZSgnYm9keScpXSxcbiAgV2l0aFN0YXRlbWVudDogW3JlY3Vyc2UoJ29iamVjdCcpLCByZWN1cnNlKCdib2R5JyldLFxufTtcblxuY29uc3QgRFJJVkVSID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBvID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yKGxldCBUIGluIFJFRFVDRVJfU1BFQykge1xuICAgIGlmKCF7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFJFRFVDRVJfU1BFQywgVCkpIGNvbnRpbnVlO1xuICAgIGxldCByZWR1Y2luZ0Z1bmN0aW9uTmFtZSA9ICdyZWR1Y2UnICsgVDtcbiAgICBvW0FTVFtUXS5wcm90b3R5cGUudHlwZV0gPSBmdW5jdGlvbihyZWR1Y2VyLCBub2RlKSB7XG4gICAgICByZXR1cm4gcmVkdWNlcltyZWR1Y2luZ0Z1bmN0aW9uTmFtZV0uYXBwbHkocmVkdWNlciwgW25vZGVdLmNvbmNhdChcbiAgICAgICAgUkVEVUNFUl9TUEVDW1RdLm1hcCgoZikgPT4gZihyZWR1Y2VyLCBub2RlKSlcbiAgICAgICkpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIG87XG59KCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlZHVjZShyZWR1Y2VyLCByZWR1Y2libGUpIHtcbiAgcmV0dXJuIERSSVZFUltyZWR1Y2libGUudHlwZV0ocmVkdWNlciwgcmVkdWNpYmxlKTtcbn1cblxuXG5leHBvcnQgY2xhc3MgUmVkdWNlciB7IH1cblxuZXhwb3J0IGNsYXNzIE1vbm9pZGFsUmVkdWNlciBleHRlbmRzIFJlZHVjZXIge1xuICBjb25zdHJ1Y3Rvcihtb25vaWQpIHtcbiAgICBsZXQgZW1wdHkgPSBtb25vaWQuZW1wdHkoKTtcbiAgICB0aGlzLmlkZW50aXR5ID0gKCkgPT4gZW1wdHk7XG4gICAgbGV0IGNvbmNhdCA9IG1vbm9pZC5wcm90b3R5cGUgJiYgbW9ub2lkLnByb3RvdHlwZS5jb25jYXQgfHwgbW9ub2lkLmNvbmNhdDtcbiAgICB0aGlzLmFwcGVuZCA9IHRoaXMuYXBwZW5kMiA9IChhLCBiKSA9PiBjb25jYXQuY2FsbChhLCBiKTtcbiAgfVxuXG4gIGZyb21OdWxsKGEpIHtcbiAgICByZXR1cm4gYSA9PSBudWxsID8gdGhpcy5pZGVudGl0eSgpIDogYTtcbiAgfVxuICBhcHBlbmQzKGEsIGIsIGMpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQodGhpcy5hcHBlbmQoYSwgYiksIGMpO1xuICB9XG4gIGFwcGVuZDQoYSwgYiwgYywgZCkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZCh0aGlzLmFwcGVuZDMoYSwgYiwgYyksIGQpO1xuICB9XG4gIGZvbGQoYXMsIGEpIHtcbiAgICByZXR1cm4gYXMucmVkdWNlKChtZW1vLCB4KSA9PiB0aGlzLmFwcGVuZChtZW1vLCB4KSwgYSA9PSBudWxsID8gdGhpcy5pZGVudGl0eSgpIDogYSk7XG4gIH1cblxuICByZWR1Y2VBcnJheUV4cHJlc3Npb24obm9kZSwgZWxlbWVudHMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGVsZW1lbnRzLmZpbHRlcigoeCkgPT4geCAhPSBudWxsKSk7XG4gIH1cbiAgcmVkdWNlQXNzaWdubWVudEV4cHJlc3Npb24obm9kZSwgYmluZGluZywgZXhwcmVzc2lvbikge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChiaW5kaW5nLCBleHByZXNzaW9uKTtcbiAgfVxuICByZWR1Y2VCaW5hcnlFeHByZXNzaW9uKG5vZGUsIGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKGxlZnQsIHJpZ2h0KTtcbiAgfVxuICByZWR1Y2VCbG9jayhub2RlLCBzdGF0ZW1lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9sZChzdGF0ZW1lbnRzKTtcbiAgfVxuICByZWR1Y2VCbG9ja1N0YXRlbWVudChub2RlLCBibG9jaykge1xuICAgIHJldHVybiBibG9jaztcbiAgfVxuICByZWR1Y2VCcmVha1N0YXRlbWVudChub2RlLCBsYWJlbCkge1xuICAgIHJldHVybiB0aGlzLmZyb21OdWxsKGxhYmVsKTtcbiAgfVxuICByZWR1Y2VDYWxsRXhwcmVzc2lvbihub2RlLCBjYWxsZWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGFyZ3MsIGNhbGxlZSk7XG4gIH1cbiAgcmVkdWNlQ2F0Y2hDbGF1c2Uobm9kZSwgYmluZGluZywgYm9keSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChiaW5kaW5nLCBib2R5KTtcbiAgfVxuICByZWR1Y2VDb21wdXRlZE1lbWJlckV4cHJlc3Npb24obm9kZSwgb2JqZWN0LCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKG9iamVjdCwgZXhwcmVzc2lvbik7XG4gIH1cbiAgcmVkdWNlQ29uZGl0aW9uYWxFeHByZXNzaW9uKG5vZGUsIHRlc3QsIGNvbnNlcXVlbnQsIGFsdGVybmF0ZSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZDModGVzdCwgY29uc2VxdWVudCwgYWx0ZXJuYXRlKTtcbiAgfVxuICByZWR1Y2VDb250aW51ZVN0YXRlbWVudChub2RlLCBsYWJlbCkge1xuICAgIHJldHVybiB0aGlzLmZyb21OdWxsKGxhYmVsKTtcbiAgfVxuICByZWR1Y2VEYXRhUHJvcGVydHkobm9kZSwgbmFtZSwgZXhwcmVzc2lvbikge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZChuYW1lLCBleHByZXNzaW9uKTtcbiAgfVxuICByZWR1Y2VEZWJ1Z2dlclN0YXRlbWVudChub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VEb1doaWxlU3RhdGVtZW50KG5vZGUsIGJvZHksIHRlc3QpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQoYm9keSwgdGVzdCk7XG4gIH1cbiAgcmVkdWNlRW1wdHlTdGF0ZW1lbnQobm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlRXhwcmVzc2lvblN0YXRlbWVudChub2RlLCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb247XG4gIH1cbiAgcmVkdWNlRm9ySW5TdGF0ZW1lbnQobm9kZSwgbGVmdCwgcmlnaHQsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQzKGxlZnQsIHJpZ2h0LCBib2R5KTtcbiAgfVxuICByZWR1Y2VGb3JTdGF0ZW1lbnQobm9kZSwgaW5pdCwgdGVzdCwgdXBkYXRlLCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kNCh0aGlzLmZyb21OdWxsKGluaXQpLCB0aGlzLmZyb21OdWxsKHRlc3QpLCB0aGlzLmZyb21OdWxsKHVwZGF0ZSksIGJvZHkpO1xuICB9XG4gIHJlZHVjZUZ1bmN0aW9uQm9keShub2RlLCBkaXJlY3RpdmVzLCBzdGF0ZW1lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKHRoaXMuZm9sZChkaXJlY3RpdmVzKSwgdGhpcy5mb2xkKHN0YXRlbWVudHMpKTtcbiAgfVxuICByZWR1Y2VGdW5jdGlvbkRlY2xhcmF0aW9uKG5vZGUsIG5hbWUsIHBhcmFtZXRlcnMsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQodGhpcy5mb2xkKHBhcmFtZXRlcnMsIG5hbWUpLCBib2R5KTtcbiAgfVxuICByZWR1Y2VGdW5jdGlvbkV4cHJlc3Npb24obm9kZSwgbmFtZSwgcGFyYW1ldGVycywgYm9keSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZCh0aGlzLmZvbGQocGFyYW1ldGVycywgdGhpcy5mcm9tTnVsbChuYW1lKSksIGJvZHkpO1xuICB9XG4gIHJlZHVjZUdldHRlcihub2RlLCBuYW1lLCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKG5hbWUsIGJvZHkpO1xuICB9XG4gIHJlZHVjZUlkZW50aWZpZXIobm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlSWRlbnRpZmllckV4cHJlc3Npb24obm9kZSwgbmFtZSkge1xuICAgIHJldHVybiBuYW1lO1xuICB9XG4gIHJlZHVjZUlmU3RhdGVtZW50KG5vZGUsIHRlc3QsIGNvbnNlcXVlbnQsIGFsdGVybmF0ZSkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZDModGVzdCwgY29uc2VxdWVudCwgdGhpcy5mcm9tTnVsbChhbHRlcm5hdGUpKTtcbiAgfVxuICByZWR1Y2VMYWJlbGVkU3RhdGVtZW50KG5vZGUsIGxhYmVsLCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKGxhYmVsLCBib2R5KTtcbiAgfVxuICByZWR1Y2VMaXRlcmFsQm9vbGVhbkV4cHJlc3Npb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlTGl0ZXJhbE51bGxFeHByZXNzaW9uKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eSgpO1xuICB9XG4gIHJlZHVjZUxpdGVyYWxOdW1lcmljRXhwcmVzc2lvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VMaXRlcmFsUmVnRXhwRXhwcmVzc2lvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VMaXRlcmFsU3RyaW5nRXhwcmVzc2lvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VOZXdFeHByZXNzaW9uKG5vZGUsIGNhbGxlZSwgYXJncykge1xuICAgIHJldHVybiB0aGlzLmZvbGQoYXJncywgY2FsbGVlKTtcbiAgfVxuICByZWR1Y2VPYmplY3RFeHByZXNzaW9uKG5vZGUsIHByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKHByb3BlcnRpZXMpO1xuICB9XG4gIHJlZHVjZVBvc3RmaXhFeHByZXNzaW9uKG5vZGUsIG9wZXJhbmQpIHtcbiAgICByZXR1cm4gb3BlcmFuZDtcbiAgfVxuICByZWR1Y2VQcmVmaXhFeHByZXNzaW9uKG5vZGUsIG9wZXJhbmQpIHtcbiAgICByZXR1cm4gb3BlcmFuZDtcbiAgfVxuICByZWR1Y2VQcm9wZXJ0eU5hbWUobm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlUmV0dXJuU3RhdGVtZW50KG5vZGUsIGV4cHJlc3Npb24pIHtcbiAgICByZXR1cm4gdGhpcy5mcm9tTnVsbChleHByZXNzaW9uKTtcbiAgfVxuICByZWR1Y2VTY3JpcHQobm9kZSwgYm9keSkge1xuICAgIHJldHVybiBib2R5O1xuICB9XG4gIHJlZHVjZVNldHRlcihub2RlLCBuYW1lLCBwYXJhbWV0ZXIsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQzKG5hbWUsIHBhcmFtZXRlciwgYm9keSk7XG4gIH1cbiAgcmVkdWNlU3RhdGljTWVtYmVyRXhwcmVzc2lvbihub2RlLCBvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKG9iamVjdCwgcHJvcGVydHkpO1xuICB9XG4gIHJlZHVjZVN3aXRjaENhc2Uobm9kZSwgdGVzdCwgY29uc2VxdWVudCkge1xuICAgIHJldHVybiB0aGlzLmZvbGQoY29uc2VxdWVudCwgdGVzdCk7XG4gIH1cbiAgcmVkdWNlU3dpdGNoRGVmYXVsdChub2RlLCBjb25zZXF1ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZm9sZChjb25zZXF1ZW50KTtcbiAgfVxuICByZWR1Y2VTd2l0Y2hTdGF0ZW1lbnQobm9kZSwgZGlzY3JpbWluYW50LCBjYXNlcykge1xuICAgIHJldHVybiB0aGlzLmZvbGQoY2FzZXMsIGRpc2NyaW1pbmFudCk7XG4gIH1cbiAgcmVkdWNlU3dpdGNoU3RhdGVtZW50V2l0aERlZmF1bHQobm9kZSwgZGlzY3JpbWluYW50LCBwcmVEZWZhdWx0Q2FzZXMsIGRlZmF1bHRDYXNlLCBwb3N0RGVmYXVsdENhc2VzKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kNChkaXNjcmltaW5hbnQsIHRoaXMuZm9sZChwcmVEZWZhdWx0Q2FzZXMpLCBkZWZhdWx0Q2FzZSwgdGhpcy5mb2xkKHBvc3REZWZhdWx0Q2FzZXMpKTtcbiAgfVxuICByZWR1Y2VUaGlzRXhwcmVzc2lvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpdHkoKTtcbiAgfVxuICByZWR1Y2VUaHJvd1N0YXRlbWVudChub2RlLCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbU51bGwoZXhwcmVzc2lvbik7XG4gIH1cbiAgcmVkdWNlVHJ5Q2F0Y2hTdGF0ZW1lbnQobm9kZSwgYmxvY2ssIGNhdGNoQ2xhdXNlKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKGJsb2NrLCBjYXRjaENsYXVzZSk7XG4gIH1cbiAgcmVkdWNlVHJ5RmluYWxseVN0YXRlbWVudChub2RlLCBibG9jaywgY2F0Y2hDbGF1c2UsIGZpbmFsaXplcikge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZDMoYmxvY2ssIHRoaXMuZnJvbU51bGwoY2F0Y2hDbGF1c2UpLCBmaW5hbGl6ZXIpO1xuICB9XG4gIHJlZHVjZVVua25vd25EaXJlY3RpdmUobm9kZSkge1xuICAgIHJldHVybiB0aGlzLmlkZW50aXR5KCk7XG4gIH1cbiAgcmVkdWNlVXNlU3RyaWN0RGlyZWN0aXZlKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eSgpO1xuICB9XG4gIHJlZHVjZVZhcmlhYmxlRGVjbGFyYXRpb24obm9kZSwgZGVjbGFyYXRvcnMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2xkKGRlY2xhcmF0b3JzKTtcbiAgfVxuICByZWR1Y2VWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KG5vZGUsIGRlY2xhcmF0aW9uKSB7XG4gICAgcmV0dXJuIGRlY2xhcmF0aW9uO1xuICB9XG4gIHJlZHVjZVZhcmlhYmxlRGVjbGFyYXRvcihub2RlLCBiaW5kaW5nLCBpbml0KSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kKGJpbmRpbmcsIHRoaXMuZnJvbU51bGwoaW5pdCkpO1xuICB9XG4gIHJlZHVjZVdoaWxlU3RhdGVtZW50KG5vZGUsIHRlc3QsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQodGVzdCwgYm9keSk7XG4gIH1cbiAgcmVkdWNlV2l0aFN0YXRlbWVudChub2RlLCBvYmplY3QsIGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmQob2JqZWN0LCBib2R5KTtcbiAgfVxufVxuIl19